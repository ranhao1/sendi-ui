<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>私有包 | Sendi UI</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="圣鼎 ui，基于 element-ui 2.x 封装的业务型组件">
    
    <link rel="preload" href="/sendi-ui/assets/css/0.styles.a881527b.css" as="style"><link rel="preload" href="/sendi-ui/assets/js/app.83538bce.js" as="script"><link rel="preload" href="/sendi-ui/assets/js/2.701d4bcc.js" as="script"><link rel="preload" href="/sendi-ui/assets/js/17.6c760de9.js" as="script"><link rel="prefetch" href="/sendi-ui/assets/js/10.cfe9c00b.js"><link rel="prefetch" href="/sendi-ui/assets/js/11.d90dca7e.js"><link rel="prefetch" href="/sendi-ui/assets/js/12.3959aab9.js"><link rel="prefetch" href="/sendi-ui/assets/js/13.e595ee20.js"><link rel="prefetch" href="/sendi-ui/assets/js/14.40f1770f.js"><link rel="prefetch" href="/sendi-ui/assets/js/15.a22cc33d.js"><link rel="prefetch" href="/sendi-ui/assets/js/16.8af2148f.js"><link rel="prefetch" href="/sendi-ui/assets/js/3.ab356c1d.js"><link rel="prefetch" href="/sendi-ui/assets/js/4.674d7efd.js"><link rel="prefetch" href="/sendi-ui/assets/js/5.0461f4c1.js"><link rel="prefetch" href="/sendi-ui/assets/js/6.85bb9493.js"><link rel="prefetch" href="/sendi-ui/assets/js/7.a21a1acb.js"><link rel="prefetch" href="/sendi-ui/assets/js/8.08d2692e.js"><link rel="prefetch" href="/sendi-ui/assets/js/9.a0ae8a90.js">
    <link rel="stylesheet" href="/sendi-ui/assets/css/0.styles.a881527b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/sendi-ui/" class="home-link router-link-active"><!----> <span class="site-name">Sendi UI</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/sendi-ui/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/sendi-ui/component/pagination.html" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="/sendi-ui/others/docsify.html" class="nav-link">
  其他
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/sendi-ui/guide/" class="nav-link">
  指南
</a></div><div class="nav-item"><a href="/sendi-ui/component/pagination.html" class="nav-link">
  组件
</a></div><div class="nav-item"><a href="/sendi-ui/others/docsify.html" class="nav-link">
  其他
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>其他</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/sendi-ui/others/docsify.html" class="sidebar-link">docsify</a></li><li><a href="/sendi-ui/others/private-package.html" aria-current="page" class="active sidebar-link">私有包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/sendi-ui/others/private-package.html#verdaccio" class="sidebar-link">verdaccio</a></li><li class="sidebar-sub-header"><a href="/sendi-ui/others/private-package.html#pm2-守护进程" class="sidebar-link">pm2 守护进程</a></li><li class="sidebar-sub-header"><a href="/sendi-ui/others/private-package.html#发布-npm-包到私有仓库" class="sidebar-link">发布 npm 包到私有仓库</a></li><li class="sidebar-sub-header"><a href="/sendi-ui/others/private-package.html#npm-更新发布后的包" class="sidebar-link">npm 更新发布后的包</a></li><li class="sidebar-sub-header"><a href="/sendi-ui/others/private-package.html#使用-nrm-管理-npm-源" class="sidebar-link">使用 nrm 管理 npm 源</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="介绍"><a href="#介绍" class="header-anchor">#</a> 介绍</h1> <p>使用 verdaccio 搭建 npm 私有库，pm2 守护进程。</p> <h2 id="verdaccio"><a href="#verdaccio" class="header-anchor">#</a> verdaccio</h2> <p>后面完善，先参考官方文档 <a href="https://verdaccio.org/" target="_blank" rel="noopener noreferrer">verdaccio<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="pm2-守护进程"><a href="#pm2-守护进程" class="header-anchor">#</a> pm2 守护进程</h2> <p>在确定 verdaccio 安装成功的情况下，使用 pm2 能更好的管理 verdaccio 服务（需要 node.js 环境），避免服务被错误关闭，进程被中断的情况。</p> <h3 id="pm2-介绍"><a href="#pm2-介绍" class="header-anchor">#</a> pm2 介绍</h3> <p>pm2 是 node 进程管理工具，可以用它来简化很多 node 应用管理的繁琐任务，如性能监控、自动重启、负载均衡等，而且使用非常简单。关于 pm2 的内容这里不做过多介绍，可以去<a href="https://pm2.keymetrics.io/" target="_blank" rel="noopener noreferrer">官网<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>查看了解</p> <h3 id="全局安装-pm2"><a href="#全局安装-pm2" class="header-anchor">#</a> 全局安装 pm2</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> pm2 -g
</code></pre></div><h3 id="使用-pm2-启动-verdaccio"><a href="#使用-pm2-启动-verdaccio" class="header-anchor">#</a> 使用 pm2 启动 verdaccio</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>pm2 start verdaccio
</code></pre></div><p>如果无法启动，找到 verdaccio 安装目录的 bin 文件夹中的 verdaccio 启动文件（具体路径根据 verdaccio 的安装位置确定）。
然后执行：</p> <div class="language-bash extra-class"><pre class="language-bash"><code>pm2 start C:<span class="token punctuation">\</span>Users<span class="token punctuation">\</span>Administrator<span class="token punctuation">\</span>AppData<span class="token punctuation">\</span>Roaming<span class="token punctuation">\</span>npm<span class="token punctuation">\</span>node_modules<span class="token punctuation">\</span>verdaccio<span class="token punctuation">\</span>bin<span class="token punctuation">\</span>verdaccio
</code></pre></div><h3 id="查看运行状态"><a href="#查看运行状态" class="header-anchor">#</a> 查看运行状态</h3> <p>查看运行状态 <code>status: online</code>，即为正常启动，可以访问使用</p> <div class="language-bash extra-class"><pre class="language-bash"><code>pm2 list
</code></pre></div><h3 id="常用命令"><a href="#常用命令" class="header-anchor">#</a> 常用命令</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>pm2 logs              <span class="token comment"># 显示所有进程日志</span>
pm2 stop all          <span class="token comment"># 停止所有进程</span>
pm2 restart all       <span class="token comment"># 重启所有进程</span>
pm2 stop <span class="token number">0</span>            <span class="token comment"># 停止指定的进程</span>
pm2 restart <span class="token number">0</span>         <span class="token comment"># 重启指定的进程</span>
pm2 delete <span class="token number">0</span>          <span class="token comment"># 杀死指定的进程</span>
pm2 delete all        <span class="token comment"># 杀死全部进程</span>

</code></pre></div><h3 id="pm2-遇到的问题"><a href="#pm2-遇到的问题" class="header-anchor">#</a> pm2 遇到的问题</h3> <p>服务器是 windows 的，在服务器重启后 pm2 不会重启之前的任务，需要手动重启（可能有解决办法，后期研究）。</p> <h2 id="发布-npm-包到私有仓库"><a href="#发布-npm-包到私有仓库" class="header-anchor">#</a> 发布 npm 包到私有仓库</h2> <p>!&gt; 下面的命名需要先把 npm 源设置为私有包地址，或者使用 --registry 参数</p> <h3 id="创建本地-npm-用户"><a href="#创建本地-npm-用户" class="header-anchor">#</a> 创建本地 npm 用户</h3> <p>需要创建本地 npm 用户，用于上传和管理 npm 包，使用 npm adduser 创建用户，输入用户名、密码、邮箱。</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> adduser
Username: yourname
Password: *
Email: *
</code></pre></div><h3 id="登录并发布"><a href="#登录并发布" class="header-anchor">#</a> 登录并发布</h3> <p>如果已经注册可以直接登录</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 登录npm</span>
<span class="token comment"># 根据提示输入账户/密码/邮箱</span>
<span class="token function">npm</span> login

<span class="token comment"># 登录成功，发布</span>
<span class="token function">npm</span> publish

</code></pre></div><h2 id="npm-更新发布后的包"><a href="#npm-更新发布后的包" class="header-anchor">#</a> npm 更新发布后的包</h2> <blockquote><p>版本号只能新增，禁止下降，代码修改必须以新版本的形式更新</p></blockquote> <p>npm 更新和发布的命令是相同的，都是用 <code>npm publish</code> 命令。不同之处在于，需要修改包的版本，步骤如下：</p> <ul><li>修改包的版本（package.json 中的 version 字段）</li> <li>执行 <code>npm publish</code></li></ul> <h3 id="npm-版本控制"><a href="#npm-版本控制" class="header-anchor">#</a> npm 版本控制</h3> <p>版本号格式：主版本号.次版本号.修订版本号</p> <p>版本号递增规则：</p> <ul><li>主版本号：做了不兼容修改或颠覆式重写</li> <li>次版本号：向下兼容的功能性更新</li> <li>修订版本号：向下兼容的问题修复</li></ul> <p>可以通过 <code>npm version &lt;update_type&gt;</code> 命令自动改变版本，updata_type 的可选值如下：</p> <div class="language- extra-class"><pre class="language-text"><code>major   # 增加主版本号
minor   # 增加次版本号
path    # 增加修订版本号
</code></pre></div><h2 id="使用-nrm-管理-npm-源"><a href="#使用-nrm-管理-npm-源" class="header-anchor">#</a> 使用 nrm 管理 npm 源</h2> <p>一般在本地会有多个 npm 源，可以使用 <a href="https://github.com/Pana/nrm" target="_blank" rel="noopener noreferrer">nrm<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 对其进行管理与切换。</p> <h3 id="安装-nrm"><a href="#安装-nrm" class="header-anchor">#</a> 安装 nrm</h3> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> nrm -g
</code></pre></div><h3 id="增加本地-npm-源"><a href="#增加本地-npm-源" class="header-anchor">#</a> 增加本地 npm 源</h3> <div class="language- extra-class"><pre class="language-text"><code>nrm add localnpm *.*.*.*:4873
</code></pre></div><h3 id="查看是否添加成功"><a href="#查看是否添加成功" class="header-anchor">#</a> 查看是否添加成功</h3> <p>nrm ls</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 源列表</span>
* <span class="token function">npm</span> -----  https://registry.npmjs.org/
  <span class="token function">yarn</span> ----- https://registry.yarnpkg.com
  cnpm ----  http://r.cnpmjs.org/
  taobao --  https://registry.npm.taobao.org/
  nj ------  https://registry.nodejitsu.com/
  skimdb -- https://skimdb.npmjs.com/registry
  localnpm --- http://*.*.*.*:4873/
</code></pre></div><h3 id="切换源"><a href="#切换源" class="header-anchor">#</a> 切换源</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>nrm use cnpm  //switch registry to cnpm

    Registry has been <span class="token builtin class-name">set</span> to: http://r.cnpmjs.org/
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/sendi-ui/others/docsify.html" class="prev">
        docsify
      </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/sendi-ui/assets/js/app.83538bce.js" defer></script><script src="/sendi-ui/assets/js/2.701d4bcc.js" defer></script><script src="/sendi-ui/assets/js/17.6c760de9.js" defer></script>
  </body>
</html>
